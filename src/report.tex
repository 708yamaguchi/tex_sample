%% 課題内容：
%% 「知能制御論」の講義を通して，自身が関連すると思うテーマで，
%% かつ興味のあるテーマを１つ設定し，モデル化や制御系設計法
%% の特徴，手法の概略，設計時の条件・注意点，具体的な適用例
%% などを数式や図を用いながら，10ページ以内（用紙サイズ A4，
%% フォント 10.5pt，一行45文字程度，一頁40行程度）でまとめよ．
%% 図を用いても良いが，大きくなり過ぎないように注意すること．
%% なお，テーマの設定に困ったら，講義で述べた事例から１つ選ん
%% でも良い．

\section{手法の概略・適用例}

知能制御論の第2回の授業でロボットアームの軌道計画の話を聞き、興味がわきました。
ロボットアームが障害物を回避するというアプリケーションに関して先行研究を調べ、自分でPythonプログラムを実装して実験してみました。

授業で紹介されていたのはサンプリングベースのものだったので、CHOMP
\footnote{CHOMP: \url{https://ieeexplore.ieee.org/abstract/document/5152817}}
やTrajOpt
\footnote{TrajOpt: \url{https://journals.sagepub.com/doi/abs/10.1177/0278364914528132}}
など最適化ベースの手法に取り組みました。

本レポートで試した手法の概略は、符号付き距離関数（SDF）による衝突判定と逐次二次計画法（SQP）による軌道最適化で、CHOMPとTrajOptを組み合わせたものになっています。

\begin{table}[htbp]
  \centering
  \begin{tabular}{c||c|c}
    手法 & 物体との衝突判定 & 最適化手法                         \\ \hline
    CHPOP      & 符号付き距離関数（SDF） & 最急降下法            \\
    TrajOpt    & 凸包（Convex hull）     & 逐次二次計画法（SQP） \\
    本レポート & 符号付き距離関数（SDF） & 逐次二次計画法（SQP） \\
  \end{tabular}
  \caption{軌道最適化の元にした手法と本レポートの比較}
  \label{table:compare}
\end{table}

\section{モデル化・制御系設計}
大きさのないリンクとジョイントがつながったロボットアームを使って衝突回避軌道を計算するのですが、その際、時系列のロボットアーム軌道を計算できるようにすることが目標です。

以下のようなモデル化を行いました。
入力は〜〜で、出力は〜〜〜という最適化を行います。

\begin{itemize}
  \item 制約条件
  \begin{itemize}
    \item ロボットアームのジョイントが円形障害物とぶつからない
    \item 最適化計算で出力された軌道の最初のロボットアームのエンドエフェクタの位置と、現在のロボットアームのエンドエフェクタの位置の距離が、一定値以下
    \item 最適化計算で出力された軌道の最後のロボットアームのエンドエフェクタの位置と、移動先のロボットアームのエンドエフェクタの位置の距離が、一定値以下
  \end{itemize}

  \item 目的関数
    \begin{itemize}
      \item 各時間的ステップにおけるロボットアームの関節角度列がなるべく離れるようにする
    \end{itemize}
\end{itemize}

数式で表現すると以下のようになります。
（ここに長々と数式を書く）

\section{設計時の条件や注意点}
\begin{itemize}
  \item プログラミングを簡略化するのと計算量を抑えるため、三次元空間ではなく二次元平面内における衝突判定を計算する。
  \item ジョイントにおける衝突判定しかしておらず、リンクの衝突判定はしていない。なので、リンクにはぶつかる可能性がある。
  \item 障害物のSDFを簡単に計算するため、障害物は形状は円形のみ。
  \item 最適化の初期解は、ロボットアームの初期姿勢を補間点数分だけ並べたベクトルになっている。
\end{itemize}
